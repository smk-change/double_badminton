# 🏸 Stickman Badminton Pro (Python 双人火柴人羽毛球)


## 1\. 项目简介 (Project Overview)

本项目是一个基于 **Python** 和 **Pygame** 引擎开发的 2D 双人动作游戏。

与传统的羽毛球游戏不同，本项目结合了“壁球”元素与真实物理模拟。游戏特色包括带有空气阻力的羽毛球物理引擎、火柴人骨骼挥拍动画、左右墙壁反弹机制以及严谨的比赛规则逻辑（如发球线限制、发球权轮换）。

代码采用**模块化 (Modular)** 设计，应用了**面向对象 (OOP)** 编程思想和**有限状态机 (FSM)** 模式，结构清晰，易于扩展。

## 2\. 核心特性 (Key Features)

### 🎮 游戏机制

  * **真实物理模拟**: 羽毛球模拟了重力和**空气阻力**（速度衰减），飞行轨迹更符合真实手感，而非简单的直线运动。
  * **墙壁反弹系统 (Wall Bounce)**: 类似壁球玩法，羽毛球撞击左右屏幕边界会反弹回场内，增加了救球机会和游戏的回合长度。
  * **发球线规则**: 实现了发球区域限制。在发球状态下，发球方被强制限制在发球线后方，防止近网偷袭，确保游戏公平性。
  * **动态发球权**: 采用标准羽毛球规则，得分方获得下一次发球权。

### 🎨 视觉与动画

  * **火柴人动画**: 摒弃简单的矩形滑块，使用几何图形绘制带关节的火柴人。
  * **挥拍动作**: 实现了挥拍状态检测。只有在按下击球键并触发挥拍动画时，且球位于击球框 (Hitbox) 内，才会被判定为有效击球。
  * **矢量旋转**: 羽毛球绘图会根据当前的飞行速度矢量自动调整角度，使球头始终朝向飞行方向。

### 🛠️ 技术亮点

  * **状态机管理**: 使用 `SERVING` (发球)、`PLAYING` (对战)、`PAUSED` (暂停)、`GAME_OVER` (结算) 四种状态精确控制游戏流程。
  * **MVC 分层结构**: 逻辑 (main.py)、数据/配置 (settings.py) 与 模型 (sprites.py) 分离。

## 3\. 项目结构 (File Structure)

```text
BadmintonProject/
│
├── main.py          # [入口] 游戏主循环、事件监听、状态渲染、胜负判定
├── sprites.py       # [模型] StickmanPlayer (玩家类) 和 Shuttlecock (羽毛球类)
├── settings.py      # [配置] 包含物理参数、颜色定义、界面尺寸、游戏规则常量
├── .gitignore       # [Git] 忽略缓存文件
└── README.md        # [文档] 项目说明书
```

## 4\. 快速开始 (Getting Started)

### 环境要求

  * Python 3.12
  * Pygame 

### 安装

在终端中运行以下命令安装依赖：

```bash
pip install pygame
```

### 运行游戏

在项目根目录下运行：

```bash
python main.py
```

## 5\. 操作说明 (Controls)

| 动作 | 玩家 1 (红方) | 玩家 2 (蓝方) | 说明 |
| :--- | :---: | :---: | :--- |
| **移动** | `A` / `D` | `←` / `→` | 左右移动 (发球时受发球线限制) |
| **跳跃** | `W` | `↑` | 空中可以击球 |
| **击球 / 发球** | `S` | `↓` | **发球状态**: 将球发出<br>**游戏状态**: 挥拍击球 |

### 系统快捷键

  * **`P`**: 暂停 / 继续游戏
  * **`Y`**: 游戏结束后，重新开始新的一局
  * **`N`**: 游戏结束后，退出程序

## 6\. 游戏规则 (Rules)

1.  **胜利条件**: 率先获得 **11分** 的一方获胜。
2.  **得分判定**: 球落地即为死球。球落在左侧场地，右侧玩家得分；反之亦然。
3.  **边界反弹**: 球触碰左右屏幕边缘不会出界，而是会反弹回场内，玩家可继续击打。
4.  **发球限制**: 屏幕上有两条白色竖线为**发球线**。发球时，玩家不可越过此线靠近球网。

## 7\. 物理模型简述 (Physics Implementation)

  * **重力 (Gravity)**: `vel_y += GRAVITY`
  * **阻力 (Drag)**: `vel_x *= AIR_RESISTANCE` (每帧速度衰减约 1.5%)
  * **反弹 (Bounce)**: `vel_x *= -0.8` (墙壁碰撞时的能量损耗模拟)

-----
